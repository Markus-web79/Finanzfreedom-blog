const fs = require("fs");
const path = require("path");

// Pfad zum content-Ordner
const contentDir = path.join(__dirname, "content");

// Funktion: Alle Dateien im content-Ordner pr√ºfen
function checkContentFiles() {
  const files = fs.readdirSync(contentDir);

  files.forEach((file) => {
    const filePath = path.join(contentDir, file);
    const content = fs.readFileSync(filePath, "utf-8");

    console.log(`üîé Pr√ºfe: ${file}`);

    // Check 1: Enth√§lt META
    if (!content.includes("META:")) {
      console.warn(`‚ö†Ô∏è  WARNUNG: ${file} hat keine META-Zeile!`);
    }

    // Check 2: Hat eine H1-√úberschrift (# ...)
    if (!content.match(/^# /m)) {
      console.warn(`‚ö†Ô∏è  WARNUNG: ${file} hat keine Haupt√ºberschrift (# ...)`);
    }

    // Check 3: Korrigiere Schreibweise (√º statt ue, √∂ statt oe, √§ statt ae)
    const corrected = content
      .replace(/ue/g, "√º")
      .replace(/oe/g, "√∂")
      .replace(/ae/g, "√§");

    if (corrected !== content) {
      fs.writeFileSync(filePath, corrected, "utf-8");
      console.log(`‚úÖ Schreibweise in ${file} korrigiert (√º/√∂/√§).`);
    }
  });

  console.log("‚ú® Check abgeschlossen!");
}

// Script starten
checkContentFiles();
