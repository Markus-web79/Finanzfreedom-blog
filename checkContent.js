// checkContent.js
const fs = require("fs");
const path = require("path");

// Ordner mit den Artikeln
const contentDir = path.join(__dirname, "content");

// Liste einfacher Korrekturen (Rechtschreibung & Umlaute)
const corrections = [
  { wrong: /Ste√ºr/g, right: "Steuer" },
  { wrong: /ste√ºr/g, right: "steuer" },
  { wrong: /Ste√ºrn/g, right: "Steuern" },
  { wrong: /Vermoegen/g, right: "Verm√∂gen" },
  { wrong: /vermoegen/g, right: "verm√∂gen" },
  { wrong: /Fuehren/g, right: "F√ºhren" },
  { wrong: /fuehren/g, right: "f√ºhren" },
  { wrong: /Oekonomie/g, right: "√ñkonomie" },
  { wrong: /oekonomie/g, right: "√∂konomie" },
  { wrong: /pa√üiv/g, right: "passiv" },
  { wrong: /√üich/g, right: "sich" },
  { wrong: /au√ü/g, right: "aus" },
  { wrong: /da√ü/g, right: "dass" },
  { wrong: /mu√ü/g, right: "muss" },
  { wrong: /Strate?gieen/g, right: "Strategien" },
];

// Hilfsfunktion: Text korrigieren
function correctText(text) {
  let newText = text;
  corrections.forEach(({ wrong, right }) => {
    newText = newText.replace(wrong, right);
  });
  return newText;
}

// Alle .md-Dateien im content-Ordner einlesen
fs.readdirSync(contentDir).forEach((file) => {
  if (file.endsWith(".md")) {
    const filePath = path.join(contentDir, file);
    let content = fs.readFileSync(filePath, "utf-8");
    const corrected = correctText(content);

    if (content !== corrected) {
      fs.writeFileSync(filePath, corrected, "utf-8");
      console.log(`‚úÖ Korrigiert: ${file}`);
    } else {
      console.log(`‚ÑπÔ∏è Keine √Ñnderungen: ${file}`);
    }
  }
});

console.log("üîç Content-Check abgeschlossen.");
