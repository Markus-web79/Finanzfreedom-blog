// checkContent.js
import fs from "fs";
import path from "path";

const contentDir = path.join(process.cwd(), "content");

// WÃ¶rterbuch fÃ¼r automatische Korrekturen
const replacements = {
  "SteÃ¼r": "Steuer",
  "steÃ¼r": "steuer",
  "SteÃ¼rn": "Steuern",
  "steÃ¼rn": "steuern",
  "ae": "Ã¤",
  "oe": "Ã¶",
  "ue": "Ã¼",
  "Ae": "Ã„",
  "Oe": "Ã–",
  "Ue": "Ãœ"
};

function fixContent(text) {
  let fixed = text;
  for (const [wrong, correct] of Object.entries(replacements)) {
    const regex = new RegExp(wrong, "g");
    fixed = fixed.replace(regex, correct);
  }
  return fixed;
}

function checkFiles() {
  const files = fs.readdirSync(contentDir);

  files.forEach((file) => {
    if (file.endsWith(".md")) {
      const filePath = path.join(contentDir, file);
      const content = fs.readFileSync(filePath, "utf8");
      const fixedContent = fixContent(content);

      if (content !== fixedContent) {
        fs.writeFileSync(filePath, fixedContent, "utf8");
        console.log(`âœ… Korrigiert: ${file}`);
      } else {
        console.log(`ðŸ‘Œ Keine Ã„nderungen: ${file}`);
      }
    }
  });
}

checkFiles();
