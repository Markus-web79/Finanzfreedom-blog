// scripts/fixContent.js

const fs = require("fs");
const path = require("path");

// Korrekturen definieren
const corrections = {
  "Steür": "Steuer",
  "Steürn": "Steuern",
  "steür": "steuer",
  "steürt": "steuert",
  "steürlich": "steuerlich",
  "Vermoegen": "Vermögen",
  "Vermoegen": "Vermögen",
  "aufbaün": "aufbauen",
  "Fuehren": "Führen",
  "Oekonomie": "Ökonomie",
  "paßiv": "passiv",
  "muß": "muss",
  "Muß": "Muss",
  "laßen": "lassen",
  "wißen": "wissen",
  "daß": "dass",
  "auß": "aus",
  "ßichere": "sichere",
  "Stratgegieen": "Strategien",
  "Steürsatz": "Steuersatz",
  "Kirchensteür": "Kirchensteuer",
  "Steürpflicht": "Steuerpflicht",
  "Steüroptimierung": "Steueroptimierung",
  "Steürlast": "Steuerlast",
  "Steürfrei": "steuerfrei",
};

// Alle Dateien im content-Verzeichnis holen
const contentDir = path.join(__dirname, "..", "content");

function fixFile(filePath) {
  let text = fs.readFileSync(filePath, "utf8");
  let fixed = text;

  for (const [wrong, right] of Object.entries(corrections)) {
    const regex = new RegExp(wrong, "g");
    fixed = fixed.replace(regex, right);
  }

  if (fixed !== text) {
    fs.writeFileSync(filePath, fixed, "utf8");
    console.log(`✔ Korrigiert: ${filePath}`);
  }
}

function walkDir(dir) {
  fs.readdirSync(dir).forEach((file) => {
    const filePath = path.join(dir, file);
    if (fs.statSync(filePath).isDirectory()) {
      walkDir(filePath);
    } else if (filePath.endsWith(".md")) {
      fixFile(filePath);
    }
  });
}

walkDir(contentDir);
console.log("✅ Alle Artikel im content/ Ordner geprüft und korrigiert.");
