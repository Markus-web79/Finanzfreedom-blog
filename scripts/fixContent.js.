// scripts/fixContent.js
import fs from "fs";
import path from "path";

// Wörterbuch mit Korrekturen
const corrections = {
  "Steür": "Steuer",
  "Steürn": "Steuern",
  "steür": "steuer",
  "steürn": "steuern",
  "Vermoegen": "Vermögen",
  "vermoegen": "vermögen",
  "aufbaün": "aufbauen",
  "Fuehren": "Führen",
  "fuehren": "führen",
  "Oekonomie": "Ökonomie",
  "oekonomie": "ökonomie",
  "paßiv": "passiv",
  "mußen": "müssen",
  "laßen": "lassen",
  "wißen": "wissen",
  "außch": "ausch", // ersetzt „außch“ → „ausch“
  "strategieen": "Strategien",
  "daür": "dauer",
  "Inflationßicher": "Inflationssicher",
  "ßich": "sich" // Sicherheitsfix für falsche ß-Kombi
};

// Pfad zum Content-Ordner
const contentDir = path.join(process.cwd(), "content");

// Alle Markdown-Dateien holen
function getMarkdownFiles(dir) {
  return fs.readdirSync(dir).filter(file => file.endsWith(".md"));
}

// Datei-Inhalt korrigieren
function fixFile(filePath) {
  let content = fs.readFileSync(filePath, "utf8");
  let fixed = content;

  for (const [wrong, correct] of Object.entries(corrections)) {
    const regex = new RegExp(wrong, "g");
    fixed = fixed.replace(regex, correct);
  }

  if (fixed !== content) {
    fs.writeFileSync(filePath, fixed, "utf8");
    console.log(`✅ Korrigiert: ${filePath}`);
  } else {
    console.log(`ℹ️ Keine Änderungen: ${filePath}`);
  }
}

// Alle Dateien durchgehen
function run() {
  const files = getMarkdownFiles(contentDir);
  files.forEach(file => {
    const filePath = path.join(contentDir, file);
    fixFile(filePath);
  });
}

run();
